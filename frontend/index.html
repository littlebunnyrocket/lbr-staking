<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LBR Staking - Cosmic Rewards</title>
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #a8d8ea;
            --secondary: #7ab3d0;
            --accent: #4d8bbd;
            --dark: #0a1a2e;
            --light: #e6f4f9;
            --success: #4caf50;
            --warning: #ff9800;
            --danger: #f44336;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--dark);
            color: var(--light);
            min-height: 100vh;
            line-height: 1.6;
            background: url('bg.jpg') no-repeat center center fixed;
            background-size: cover;
            position: relative;
        }

        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(10, 26, 46, 0.7);
            z-index: -1;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid rgba(168, 216, 234, 0.2);
            margin-bottom: 30px;
        }

        .logo {
            font-family: 'Orbitron', sans-serif;
            font-size: 28px;
            font-weight: 700;
            color: var(--primary);
            text-shadow: 0 0 10px rgba(168, 216, 234, 0.5);
            display: flex;
            align-items: center;
        }

        .logo i {
            margin-right: 10px;
            color: var(--accent);
        }

        .wallet-section {
            display: flex;
            align-items: center;
        }

        .wallet-btn {
            background: linear-gradient(135deg, var(--accent), var(--secondary));
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 30px;
            cursor: pointer;
            font-weight: 500;
            display: flex;
            align-items: center;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(77, 139, 189, 0.3);
        }

        .wallet-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(77, 139, 189, 0.4);
        }

        .wallet-btn i {
            margin-right: 8px;
        }

        .wallet-info {
            display: none;
            align-items: center;
            background: rgba(10, 26, 46, 0.8);
            border-radius: 30px;
            padding: 8px 15px;
            margin-left: 15px;
            border: 1px solid var(--accent);
            position: relative;
        }

        .wallet-address {
            font-family: monospace;
            font-size: 14px;
            color: var(--primary);
            cursor: pointer;
            margin-right: 10px;
        }

        .wallet-dropdown {
            display: none;
            position: relative;
            top: 100%;
            right: 0;
            background: rgba(10, 26, 46, 0.95);
            border: 1px solid var(--accent);
            border-radius: 10px;
            padding: 20px;
            width: 150px;
            z-index: 100;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }

        .wallet-dropdown.show {
            display: block;
        }

        .wallet-balance {
            margin-bottom: 10px;
            font-size: 14px;
        }

        .wallet-balance span {
            color: var(--primary);
            font-weight: 500;
        }

        .disconnect-btn {
            background: var(--danger);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            width: 100%;
            transition: all 0.3s ease;
        }

        .disconnect-btn:hover {
            background: #d32f2f;
        }

        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .card {
            background: rgba(10, 26, 46, 0.7);
            border: 1px solid rgba(122, 179, 208, 0.3);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(5px);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .card:hover {
            border-color: rgba(122, 179, 208, 0.6);
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.3);
        }

        .card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(122, 179, 208, 0.1) 0%, transparent 70%);
            transform: rotate(30deg);
            z-index: -1;
        }

        .card-title {
            font-family: 'Orbitron', sans-serif;
            color: var(--primary);
            margin-bottom: 15px;
            font-size: 18px;
            display: flex;
            align-items: center;
        }

        .card-title i {
            margin-right: 10px;
            color: var(--accent);
        }

        .card-content {
            margin-bottom: 15px;
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .stat-label {
            color: var(--secondary);
        }

        .stat-value {
            color: var(--light);
            font-weight: 500;
        }

        .input-group {
            margin-bottom: 15px;
        }

        .input-label {
            display: block;
            margin-bottom: 8px;
            color: var(--secondary);
            font-size: 14px;
        }

        .input-field {
            width: 100%;
            padding: 12px 15px;
            background: rgba(10, 26, 46, 0.5);
            border: 1px solid rgba(122, 179, 208, 0.3);
            border-radius: 8px;
            color: var(--light);
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .input-field:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 2px rgba(77, 139, 189, 0.3);
        }

        .btn {
            background: linear-gradient(135deg, var(--accent), var(--secondary));
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            font-size: 16px;
            width: 100%;
            transition: all 0.3s ease;
            margin-top: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .btn i {
            margin-right: 8px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(77, 139, 189, 0.4);
        }

        .btn-secondary {
            background: rgba(122, 179, 208, 0.2);
            border: 1px solid var(--secondary);
        }

        .btn-secondary:hover {
            background: rgba(122, 179, 208, 0.4);
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success), #3d8b40);
        }

        .btn-warning {
            background: linear-gradient(135deg, var(--warning), #e68a00);
        }

        .btn-danger {
            background: linear-gradient(135deg, var(--danger), #d32f2f);
        }

        .approve-btn {
            background: linear-gradient(135deg, #ff9800, #e68a00);
        }

        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid rgba(122, 179, 208, 0.3);
        }

        .tab {
            padding: 10px 20px;
            cursor: pointer;
            color: var(--secondary);
            font-weight: 500;
            position: relative;
        }

        .tab.active {
            color: var(--primary);
        }

        .tab.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            width: 100%;
            height: 2px;
            background: var(--accent);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .lock-item {
            background: rgba(10, 26, 46, 0.5);
            border: 1px solid rgba(122, 179, 208, 0.2);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .lock-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .lock-amount {
            font-weight: 500;
            color: var(--primary);
        }

        .lock-status {
            font-size: 12px;
            background: rgba(122, 179, 208, 0.2);
            padding: 3px 8px;
            border-radius: 10px;
        }

        .lock-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            font-size: 13px;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: var(--dark);
            border: 1px solid var(--accent);
            border-radius: 15px;
            width: 90%;
            max-width: 400px;
            padding: 25px;
            position: relative;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
        }

        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 24px;
            color: var(--secondary);
            cursor: pointer;
            background: none;
            border: none;
        }

        .modal-title {
            font-family: 'Orbitron', sans-serif;
            color: var(--primary);
            margin-bottom: 20px;
            text-align: center;
        }

        .wallet-option {
            display: flex;
            align-items: center;
            padding: 15px;
            margin-bottom: 15px;
            background: rgba(10, 26, 46, 0.7);
            border: 1px solid rgba(122, 179, 208, 0.3);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .wallet-option:hover {
            background: rgba(122, 179, 208, 0.2);
            border-color: var(--accent);
        }

        .wallet-option i {
            font-size: 24px;
            margin-right: 15px;
            color: var(--accent);
        }

        .wallet-name {
            font-weight: 500;
        }

        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(10, 26, 46, 0.9);
            border: 1px solid var(--accent);
            border-radius: 8px;
            padding: 15px 20px;
            color: var(--light);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 1000;
            max-width: 300px;
        }

        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }

        .toast-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }

        .toast-title {
            font-weight: 500;
            color: var(--primary);
        }

        .toast-close {
            background: none;
            border: none;
            color: var(--secondary);
            cursor: pointer;
        }

        @media (max-width: 768px) {
            .card-grid {
                grid-template-columns: 1fr;
            }
            
            header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .wallet-section {
                margin-top: 15px;
                width: 100%;
                justify-content: space-between;
            }
            
            .wallet-info {
                margin-left: 0;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 15px;
            }
            
            .card {
                padding: 15px;
            }
            
            .btn {
                padding: 10px 15px;
                font-size: 14px;
            }
            
            .tabs {
                overflow-x: auto;
                white-space: nowrap;
                padding-bottom: 5px;
            }
            
            .tab {
                padding: 8px 15px;
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <i class="fas fa-rocket"></i>
                <span>LBR Staking</span>
            </div>
            <div class="wallet-section">
                <button class="wallet-btn" id="connectWalletBtn">
                    <i class="fas fa-wallet"></i>
                    <span>Connect Wallet</span>
                </button>
                <div class="wallet-info" id="walletInfo">
                    <span class="wallet-address" id="walletAddress"></span>
                    <i class="fas fa-chevron-down" id="walletDropdownToggle"></i>
                    <div class="wallet-dropdown" id="walletDropdown">
                        <div class="wallet-balance">
                            Native: <span id="nativeBalance">0</span> ETH
                        </div>
                        <div class="wallet-balance">
                            lbrETH: <span id="lbrETHBalance">0</span>
                        </div>
                        <div class="wallet-balance">
                            LBR: <span id="lbrBalance">0</span>
                        </div>
                        <button class="disconnect-btn" id="disconnectWalletBtn">
                            <i class="fas fa-sign-out-alt"></i> Disconnect
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <div class="card-grid">
            <div class="card">
                <h3 class="card-title">
                    <i class="fas fa-chart-line"></i>
                    Overview
                </h3>
                <div class="card-content">
                    <div class="stat-item">
                        <span class="stat-label">Total Staked</span>
                        <span class="stat-value" id="totalStaked">0 lbrETH</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Your Stake</span>
                        <span class="stat-value" id="userStake">0 lbrETH</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Your Rewards</span>
                        <span class="stat-value" id="userRewards">0 LBR</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Staking Reward Rate</span>
                        <span class="stat-value" id="rewardRate">0 LBR/day</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Lock Reward APY</span>
                        <span class="stat-value">
                            30d: <span id="apy30">10%</span>,
                            90d: <span id="apy90">30%</span>,
                            180d: <span id="apy180">60%</span>,
                            365d: <span id="apy365">120%</span>
                        </span>
                    </div>
                </div>
            </div>

            <div class="card">
                <h3 class="card-title">
                    <i class="fas fa-exchange-alt"></i>
                    Deposit/Withdraw
                </h3>
                <div class="tabs">
                    <div class="tab active" data-tab="deposit">Deposit</div>
                    <div class="tab" data-tab="withdraw">Withdraw</div>
                </div>
                <div class="tab-content active" id="depositTab">
                    <div class="input-group">
                        <label class="input-label">Amount (ETH)</label>
                        <input type="number" class="input-field" id="depositAmount" placeholder="0.0">
                    </div>
                    <button class="btn" id="depositBtn">
                        <i class="fas fa-arrow-down"></i> Deposit
                    </button>
                </div>
                <div class="tab-content" id="withdrawTab">
                    <div class="input-group">
                        <label class="input-label">Amount (lbrETH)</label>
                        <input type="number" class="input-field" id="withdrawAmount" placeholder="0.0">
                    </div>
                    <button class="btn" id="withdrawBtn">
                        <i class="fas fa-arrow-up"></i> Withdraw
                    </button>
                </div>
            </div>

            <div class="card">
                <h3 class="card-title">
                    <i class="fas fa-coins"></i>
                    Stake Dashboard
                </h3>
                <div class="input-group">
                    <label class="input-label">Amount (lbrETH)</label>
                    <input type="number" class="input-field" id="stakeAmount" placeholder="0.0">
                </div>
                <button class="btn btn-secondary" id="approveStakeBtn">
                    <i class="fas fa-check-circle"></i> Approve
                </button>
                <button class="btn" id="stakeBtn">
                    <i class="fas fa-lock"></i> Stake
                </button>
                <button class="btn btn-warning" id="unstakeBtn">
                    <i class="fas fa-unlock"></i> Unstake
                </button>
                <button class="btn btn-success" id="claimRewardBtn">
                    <i class="fas fa-gift"></i> Claim Rewards
                </button>
            </div>
        </div>

        <div class="card-grid">
            <div class="card">
                <h3 class="card-title">
                    <i class="fas fa-fire"></i>
                    Burn for Reward
                </h3>
                <div class="input-group">
                    <label class="input-label">Amount (LBR)</label>
                    <input type="number" class="input-field" id="burnAmount" placeholder="0.0">
                </div>
                <button class="btn btn-secondary" id="approveBurnBtn">
                    <i class="fas fa-check-circle"></i> Approve
                </button>
                <button class="btn btn-danger" id="burnBtn">
                    <i class="fas fa-fire"></i> Burn for Reward
                </button>
                <div class="stat-item" style="margin-top: 15px;">
                    <span class="stat-label">Burn Reward Rate</span>
                    <span class="stat-value" id="burnRewardRate">110%</span>
                </div>
            </div>

            <div class="card">
                <h3 class="card-title">
                    <i class="fas fa-lock"></i>
                    Lock Reward
                </h3>
                <div class="input-group">
                    <label class="input-label">Amount (LBR)</label>
                    <input type="number" class="input-field" id="lockAmount" placeholder="0.0">
                </div>
                <div class="input-group">
                    <label class="input-label">Duration</label>
                    <select class="input-field" id="lockDuration">
                        <option value="2592000">30 Days (10% APY)</option>
                        <option value="7776000">90 Days (30% APY)</option>
                        <option value="15552000">180 Days (60% APY)</option>
                        <option value="31536000">365 Days (120% APY)</option>
                    </select>
                </div>
                <button class="btn btn-secondary" id="approveLockBtn">
                    <i class="fas fa-check-circle"></i> Approve
                </button>
                <button class="btn" id="lockBtn">
                    <i class="fas fa-lock"></i> Lock Reward
                </button>
            </div>

            <div class="card">
                <h3 class="card-title">
                    <i class="fas fa-unlock"></i>
                    Your Locks
                </h3>
                <div id="locksContainer">
                    <p style="text-align: center; color: var(--secondary);">No active locks found</p>
                </div>
            </div>
        </div>

        <div class="card">
            <h3 class="card-title">
                <i class="fas fa-info-circle"></i>
                LBR Token Overview
            </h3>
            <div class="card-content">
                <div class="stat-item">
                    <span class="stat-label">Your Balance</span>
                    <span class="stat-value" id="userLBRBalance">0 LBR</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Treasury Balance</span>
                    <span class="stat-value" id="treasuryBalance">0 LBR</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Daily Burn Limit</span>
                    <span class="stat-value" id="burnLimit">0.05% of total supply</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Burned Today</span>
                    <span class="stat-value" id="burnedToday">0 LBR</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Wallet Connection Modal -->
    <div class="modal" id="walletModal">
        <div class="modal-content">
            <button class="modal-close" id="closeWalletModal">&times;</button>
            <h3 class="modal-title">Connect Wallet</h3>
            <div class="wallet-option" id="metamaskOption">
                <i class="fab fa-ethereum"></i>
                <div>
                    <div class="wallet-name">MetaMask</div>
                    <div style="font-size: 12px; color: var(--secondary);">Browser Extension</div>
                </div>
            </div>
            <div class="wallet-option" id="walletConnectOption">
                <i class="fas fa-wallet"></i>
                <div>
                    <div class="wallet-name">WalletConnect</div>
                    <div style="font-size: 12px; color: var(--secondary);">Mobile Wallets</div>
                </div>
            </div>
            <div class="wallet-option" id="injectedOption">
                <i class="fas fa-plug"></i>
                <div>
                    <div class="wallet-name">Injected</div>
                    <div style="font-size: 12px; color: var(--secondary);">Other Wallets</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <div class="toast-header">
            <div class="toast-title" id="toastTitle">Notification</div>
            <button class="toast-close" id="toastClose">&times;</button>
        </div>
        <div class="toast-message" id="toastMessage">This is a notification message.</div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/web3@1.5.2/dist/web3.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@walletconnect/web3-provider@1.7.8/dist/umd/index.min.js"></script>
    <script>
        // Contract ABIs
        const lbrETHABI = [
            {"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},
            {"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},
            {"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},
            {"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"}
        ];

        const LBRTokenABI = [
            {"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},
            {"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},
            {"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},
            {"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},
            {"constant":false,"inputs":[{"name":"amount","type":"uint256"}],"name":"burn","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},
            {"constant":false,"inputs":[{"name":"account","type":"address"},{"name":"amount","type":"uint256"}],"name":"burnFrom","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},
            {"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"}
        ];

        const LBRStakingABI = [
            {"inputs":[{"internalType":"address","name":"_lbrETH","type":"address"},{"internalType":"address","name":"_lbrToken","type":"address"},{"internalType":"address","name":"_treasury","type":"address"},{"internalType":"address","name":"initialOwner","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},
            {"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"burned","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"reward","type":"uint256"}],"name":"BurnedForReward","type":"event"},
            {"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"reward","type":"uint256"}],"name":"RewardClaimed","type":"event"},
            {"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"fee","type":"uint256"}],"name":"Staked","type":"event"},
            {"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"fee","type":"uint256"}],"name":"Unstaked","type":"event"},
            {"inputs":[],"name":"FEE_DENOMINATOR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},
            {"inputs":[],"name":"LBR","outputs":[{"internalType":"contract ILBRToken","name":"","type":"address"}],"stateMutability":"view","type":"function"},
            {"inputs":[],"name":"burnRewardRate","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},
            {"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"burnForReward","outputs":[],"stateMutability":"nonpayable","type":"function"},
            {"inputs":[],"name":"claimReward","outputs":[],"stateMutability":"nonpayable","type":"function"},
            {"inputs":[],"name":"earlyUnlockPenalty","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},
            {"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"earned","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},
            {"inputs":[],"name":"getTreasuryLBRBalance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},
            {"inputs":[{"internalType":"address","name":"user","type":"address"}],"name":"getUserLocks","outputs":[{"components":[{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"unlockTime","type":"uint256"},{"internalType":"uint256","name":"apy","type":"uint256"},{"internalType":"bool","name":"claimed","type":"bool"}],"internalType":"struct LBRStaking.LockInfo[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},
            {"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"lockDurations","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},
            {"inputs":[],"name":"lockFee","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},
            {"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"duration","type":"uint256"}],"name":"lockReward","outputs":[],"stateMutability":"nonpayable","type":"function"},
            {"inputs":[],"name":"lbrETH","outputs":[{"internalType":"contract IlbrETH","name":"","type":"address"}],"stateMutability":"view","type":"function"},
            {"inputs":[],"name":"rewardPerToken","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},
            {"inputs":[],"name":"rewardPerTokenStored","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},
            {"inputs":[{"internalType":"uint256","name":"_burnRewardRate","type":"uint256"}],"name":"setBurnRewardRate","outputs":[],"stateMutability":"nonpayable","type":"function"},
            {"inputs":[{"internalType":"uint256","name":"duration","type":"uint256"},{"internalType":"uint256","name":"apyBasisPoints","type":"uint256"}],"name":"setLockDurationAPY","outputs":[],"stateMutability":"nonpayable","type":"function"},
            {"inputs":[{"internalType":"uint256","name":"_stakingRewardRate","type":"uint256"}],"name":"setStakingRewardRate","outputs":[],"stateMutability":"nonpayable","type":"function"},
            {"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"stake","outputs":[],"stateMutability":"nonpayable","type":"function"},
            {"inputs":[],"name":"stakeFee","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},
            {"inputs":[],"name":"stakingRewardRate","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},
            {"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"stakes","outputs":[{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"rewardPerTokenStored","type":"uint256"},{"internalType":"uint256","name":"lastClaimed","type":"uint256"}],"stateMutability":"view","type":"function"},
            {"inputs":[],"name":"totalStaked","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},
            {"inputs":[],"name":"treasury","outputs":[{"internalType":"contract LBRTreasury","name":"","type":"address"}],"stateMutability":"view","type":"function"},
            {"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"unstake","outputs":[],"stateMutability":"nonpayable","type":"function"},
            {"inputs":[],"name":"unstakeFee","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},
            {"inputs":[{"internalType":"uint256","name":"lockId","type":"uint256"}],"name":"unlock","outputs":[],"stateMutability":"nonpayable","type":"function"}
        ];

        const LBRTreasuryABI = [
            {"inputs":[{"internalType":"address","name":"_lbrToken","type":"address"},{"internalType":"address","name":"initialOwner","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},
            {"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"TokensBurned","type":"event"},
            {"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"TokensDeposited","type":"event"},
            {"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"TokensDistributed","type":"event"},
            {"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"TokensWithdrawn","type":"event"},
            {"inputs":[],"name":"DAILY_BURN_LIMIT_PERCENT","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},
            {"inputs":[],"name":"LBR","outputs":[{"internalType":"contract ILBRToken","name":"","type":"address"}],"stateMutability":"view","type":"function"},
            {"inputs":[],"name":"burnedToday","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},
            {"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"burn","outputs":[],"stateMutability":"nonpayable","type":"function"},
            {"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"deposit","outputs":[],"stateMutability":"nonpayable","type":"function"},
            {"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"distribute","outputs":[],"stateMutability":"nonpayable","type":"function"},
            {"inputs":[],"name":"lastBurnDate","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},
            {"inputs":[{"internalType":"address","name":"_stakingContract","type":"address"}],"name":"setStakingContract","outputs":[],"stateMutability":"nonpayable","type":"function"},
            {"inputs":[],"name":"stakingContract","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},
            {"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"withdraw","outputs":[],"stateMutability":"nonpayable","type":"function"}
        ];

        // Contract addresses
        const lbrETHAddress = "0x673f0eA10E784E869955b078EE450f45eD06aa73";
        const LBRTokenAddress = "0x673f0eA10E784E869955b078EE450f45eD06aa73";
        const LBRTreasuryAddress = "0x7D8bCE50a812a02eF7B60f0380d882a941cb1FDB";
        const LBRStakingAddress = "0x0fBb8634DC931E87ca436D3552b8b48F771dC244";

        // Network configuration
        const riseETHConfig = {
            chainId: "0xaa39db", // 11155931 in hex
            chainName: "Rise ETH Testnet",
            nativeCurrency: {
                name: "Ethereum",
                symbol: "ETH",
                decimals: 18
            },
            rpcUrls: ["https://testnet.riselabs.xyz"],
            blockExplorerUrls: ["https://explorer.testnet.riselabs.xyz"]
        };

        // Global variables
        let web3;
        let provider;
        let accounts = [];
        let lbrETHContract;
        let LBRTokenContract;
        let LBRStakingContract;
        let LBRTreasuryContract;

        // DOM elements
        const connectWalletBtn = document.getElementById('connectWalletBtn');
        const walletInfo = document.getElementById('walletInfo');
        const walletAddress = document.getElementById('walletAddress');
        const walletDropdownToggle = document.getElementById('walletDropdownToggle');
        const walletDropdown = document.getElementById('walletDropdown');
        const nativeBalance = document.getElementById('nativeBalance');
        const lbrETHBalance = document.getElementById('lbrETHBalance');
        const lbrBalance = document.getElementById('lbrBalance');
        const disconnectWalletBtn = document.getElementById('disconnectWalletBtn');
        const walletModal = document.getElementById('walletModal');
        const closeWalletModal = document.getElementById('closeWalletModal');
        const metamaskOption = document.getElementById('metamaskOption');
        const walletConnectOption = document.getElementById('walletConnectOption');
        const injectedOption = document.getElementById('injectedOption');
        const toast = document.getElementById('toast');
        const toastTitle = document.getElementById('toastTitle');
        const toastMessage = document.getElementById('toastMessage');
        const toastClose = document.getElementById('toastClose');

        // Dashboard elements
        const totalStakedEl = document.getElementById('totalStaked');
        const userStakeEl = document.getElementById('userStake');
        const userRewardsEl = document.getElementById('userRewards');
        const rewardRateEl = document.getElementById('rewardRate');
        const apy30 = document.getElementById('apy30');
        const apy90 = document.getElementById('apy90');
        const apy180 = document.getElementById('apy180');
        const apy365 = document.getElementById('apy365');
        const burnRewardRateEl = document.getElementById('burnRewardRate');
        const userLBRBalanceEl = document.getElementById('userLBRBalance');
        const treasuryBalanceEl = document.getElementById('treasuryBalance');
        const burnLimitEl = document.getElementById('burnLimit');
        const burnedTodayEl = document.getElementById('burnedToday');

        // Form elements
        const depositAmount = document.getElementById('depositAmount');
        const depositBtn = document.getElementById('depositBtn');
        const withdrawAmount = document.getElementById('withdrawAmount');
        const withdrawBtn = document.getElementById('withdrawBtn');
        const stakeAmount = document.getElementById('stakeAmount');
        const approveStakeBtn = document.getElementById('approveStakeBtn');
        const stakeBtn = document.getElementById('stakeBtn');
        const unstakeBtn = document.getElementById('unstakeBtn');
        const claimRewardBtn = document.getElementById('claimRewardBtn');
        const burnAmount = document.getElementById('burnAmount');
        const approveBurnBtn = document.getElementById('approveBurnBtn');
        const burnBtn = document.getElementById('burnBtn');
        const lockAmount = document.getElementById('lockAmount');
        const lockDuration = document.getElementById('lockDuration');
        const approveLockBtn = document.getElementById('approveLockBtn');
        const lockBtn = document.getElementById('lockBtn');
        const locksContainer = document.getElementById('locksContainer');

        // Tab functionality
        const tabs = document.querySelectorAll('.tab');
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const tabId = tab.getAttribute('data-tab');
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                tab.classList.add('active');
                document.getElementById(`${tabId}Tab`).classList.add('active');
            });
        });

        // Wallet dropdown toggle
        walletDropdownToggle.addEventListener('click', () => {
            walletDropdown.classList.toggle('show');
        });

        // Close dropdown when clicking outside
        document.addEventListener('click', (e) => {
            if (!walletInfo.contains(e.target)) {
                walletDropdown.classList.remove('show');
            }
        });

        // Toast notification
        function showToast(title, message, duration = 5000) {
            toastTitle.textContent = title;
            toastMessage.textContent = message;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, duration);
        }

        toastClose.addEventListener('click', () => {
            toast.classList.remove('show');
        });

        // Connect wallet modal
        connectWalletBtn.addEventListener('click', () => {
            walletModal.style.display = 'flex';
        });

        closeWalletModal.addEventListener('click', () => {
            walletModal.style.display = 'none';
        });

        // Wallet connection options
        metamaskOption.addEventListener('click', async () => {
            await connectWithMetaMask();
        });

        walletConnectOption.addEventListener('click', async () => {
            await connectWithWalletConnect();
        });

        injectedOption.addEventListener('click', async () => {
            await connectWithInjected();
        });

        // Connect with MetaMask
        async function connectWithMetaMask() {
            try {
                if (window.ethereum) {
                    provider = window.ethereum;
                    web3 = new Web3(provider);
                    
                    try {
                        // Request account access
                        accounts = await provider.request({ method: 'eth_requestAccounts' });
                        
                        // Check if connected to Rise ETH
                        await checkNetwork();
                        
                        // Initialize contracts
                        await initializeContracts();
                        
                        // Update UI
                        updateWalletInfo();
                        walletModal.style.display = 'none';
                        showToast('Success', 'Wallet connected successfully');
                    } catch (error) {
                        console.error('User denied account access:', error);
                        showToast('Error', 'User denied account access', 3000);
                    }
                } else {
                    showToast('Error', 'MetaMask not detected', 3000);
                }
            } catch (error) {
                console.error('Error connecting with MetaMask:', error);
                showToast('Error', 'Failed to connect wallet', 3000);
            }
        }

        // Connect with WalletConnect
        async function connectWithWalletConnect() {
            try {
                const WalletConnectProvider = window.WalletConnectProvider.default;
                provider = new WalletConnectProvider({
                    rpc: {
                        [parseInt(riseETHConfig.chainId)]: riseETHConfig.rpcUrls[0]
                    }
                });
                
                // Enable session (triggers QR Code modal)
                await provider.enable();
                
                web3 = new Web3(provider);
                accounts = await web3.eth.getAccounts();
                
                // Check if connected to Rise ETH
                await checkNetwork();
                
                // Initialize contracts
                await initializeContracts();
                
                // Update UI
                updateWalletInfo();
                walletModal.style.display = 'none';
                showToast('Success', 'Wallet connected successfully');
                
                // Subscribe to accounts change
                provider.on("accountsChanged", (accounts) => {
                    updateWalletInfo();
                });
                
                // Subscribe to chainId change
                provider.on("chainChanged", (chainId) => {
                    window.location.reload();
                });
                
                // Subscribe to session disconnection
                provider.on("disconnect", (code, reason) => {
                    disconnectWallet();
                });
            } catch (error) {
                console.error('Error connecting with WalletConnect:', error);
                showToast('Error', 'Failed to connect wallet', 3000);
            }
        }

        // Connect with Injected
        async function connectWithInjected() {
            try {
                if (window.ethereum) {
                    provider = window.ethereum;
                    web3 = new Web3(provider);
                    
                    try {
                        // Request account access
                        accounts = await provider.request({ method: 'eth_requestAccounts' });
                        
                        // Check if connected to Rise ETH
                        await checkNetwork();
                        
                        // Initialize contracts
                        await initializeContracts();
                        
                        // Update UI
                        updateWalletInfo();
                        walletModal.style.display = 'none';
                        showToast('Success', 'Wallet connected successfully');
                    } catch (error) {
                        console.error('User denied account access:', error);
                        showToast('Error', 'User denied account access', 3000);
                    }
                } else {
                    showToast('Error', 'No injected provider found', 3000);
                }
            } catch (error) {
                console.error('Error connecting with Injected:', error);
                showToast('Error', 'Failed to connect wallet', 3000);
            }
        }

        // Check if connected to Rise ETH network
        async function checkNetwork() {
            try {
                const chainId = await web3.eth.getChainId();
                
                if (chainId !== parseInt(riseETHConfig.chainId)) {
                    try {
                        await provider.request({
                            method: 'wallet_addEthereumChain',
                            params: [riseETHConfig]
                        });
                    } catch (error) {
                        console.error('Error adding chain:', error);
                        throw new Error('Please switch to Rise ETH network');
                    }
                }
            } catch (error) {
                console.error('Error checking network:', error);
                throw error;
            }
        }

        // Initialize contracts
        async function initializeContracts() {
            try {
                lbrETHContract = new web3.eth.Contract(lbrETHABI, lbrETHAddress);
                LBRTokenContract = new web3.eth.Contract(LBRTokenABI, LBRTokenAddress);
                LBRStakingContract = new web3.eth.Contract(LBRStakingABI, LBRStakingAddress);
                LBRTreasuryContract = new web3.eth.Contract(LBRTreasuryABI, LBRTreasuryAddress);
                
                // Set up event listeners for account changes
                if (provider.on) {
                    provider.on('accountsChanged', (newAccounts) => {
                        accounts = newAccounts;
                        updateWalletInfo();
                    });
                    
                    provider.on('chainChanged', () => {
                        window.location.reload();
                    });
                    
                    provider.on('disconnect', () => {
                        disconnectWallet();
                    });
                }
                
                // Load initial data
                await loadDashboardData();
            } catch (error) {
                console.error('Error initializing contracts:', error);
                throw error;
            }
        }

        // Update wallet info in UI
        async function updateWalletInfo() {
            if (accounts.length > 0) {
                connectWalletBtn.style.display = 'none';
                walletInfo.style.display = 'flex';
                
                // Shorten address
                const shortAddress = `${accounts[0].substring(0, 6)}...${accounts[0].substring(38)}`;
                walletAddress.textContent = shortAddress;
                
                // Get balances
                const ethBalance = await web3.eth.getBalance(accounts[0]);
                const lbrETHBal = await lbrETHContract.methods.balanceOf(accounts[0]).call();
                const lbrBal = await LBRTokenContract.methods.balanceOf(accounts[0]).call();
                
                // Update balances
                nativeBalance.textContent = formatBalance(web3.utils.fromWei(ethBalance, 'ether'));
                lbrETHBalance.textContent = formatBalance(web3.utils.fromWei(lbrETHBal, 'ether'));
                lbrBalance.textContent = formatBalance(web3.utils.fromWei(lbrBal, 'ether'));
                
                // Enable wallet address click to show dropdown
                walletAddress.addEventListener('click', () => {
                    walletDropdown.classList.toggle('show');
                });
            } else {
                connectWalletBtn.style.display = 'flex';
                walletInfo.style.display = 'none';
            }
        }

        // Format balance to 3 decimal places
        function formatBalance(balance) {
            return parseFloat(balance).toFixed(3);
        }

        // Disconnect wallet
        function disconnectWallet() {
            if (provider.disconnect) {
                provider.disconnect();
            }
            
            accounts = [];
            web3 = null;
            provider = null;
            
            connectWalletBtn.style.display = 'flex';
            walletInfo.style.display = 'none';
            
            showToast('Info', 'Wallet disconnected');
        }

        disconnectWalletBtn.addEventListener('click', disconnectWallet);

        // Load dashboard data
        async function loadDashboardData() {
            try {
                if (accounts.length > 0) {
                    // Get staking data
                    const totalStakedVal = await LBRStakingContract.methods.totalStaked().call();
                    const userStakeVal = await LBRStakingContract.methods.stakes(accounts[0]).call();
                    const userRewardsVal = await LBRStakingContract.methods.earned(accounts[0]).call();
                    const rewardRateVal = await LBRStakingContract.methods.stakingRewardRate().call();
                    const burnRewardRateVal = await LBRStakingContract.methods.burnRewardRate().call();
                    
                    // Get lock durations APY
                    const apy30Val = await LBRStakingContract.methods.lockDurations(2592000).call();
                    const apy90Val = await LBRStakingContract.methods.lockDurations(7776000).call();
                    const apy180Val = await LBRStakingContract.methods.lockDurations(15552000).call();
                    const apy365Val = await LBRStakingContract.methods.lockDurations(31536000).call();
                    
                    // Get LBR token data
                    const userLBRBal = await LBRTokenContract.methods.balanceOf(accounts[0]).call();
                    const treasuryLBRBal = await LBRStakingContract.methods.getTreasuryLBRBalance().call();
                    const burnedTodayVal = await LBRTreasuryContract.methods.burnedToday().call();
                    
                    // Update UI
                    totalStakedEl.textContent = `${formatBalance(web3.utils.fromWei(totalStakedVal, 'ether'))} lbrETH`;
                    userStakeEl.textContent = `${formatBalance(web3.utils.fromWei(userStakeVal.amount, 'ether'))} lbrETH`;
                    userRewardsEl.textContent = `${formatBalance(web3.utils.fromWei(userRewardsVal, 'ether'))} LBR`;
                    rewardRateEl.textContent = `${formatBalance(web3.utils.fromWei(rewardRateVal, 'ether'))} LBR/day`;
                    burnRewardRateEl.textContent = `${(burnRewardRateVal / 100).toFixed(0)}%`;
                    
                    apy30.textContent = `${(apy30Val / 100).toFixed(0)}%`;
                    apy90.textContent = `${(apy90Val / 100).toFixed(0)}%`;
                    apy180.textContent = `${(apy180Val / 100).toFixed(0)}%`;
                    apy365.textContent = `${(apy365Val / 100).toFixed(0)}%`;
                    
                    userLBRBalanceEl.textContent = `${formatBalance(web3.utils.fromWei(userLBRBal, 'ether'))} LBR`;
                    treasuryBalanceEl.textContent = `${formatBalance(web3.utils.fromWei(treasuryLBRBal, 'ether'))} LBR`;
                    burnLimitEl.textContent = `0.05% of total supply`;
                    burnedTodayEl.textContent = `${formatBalance(web3.utils.fromWei(burnedTodayVal, 'ether'))} LBR`;
                    
                    // Load user locks
                    await loadUserLocks();
                }
            } catch (error) {
                console.error('Error loading dashboard data:', error);
            }
        }

        // Load user locks
        async function loadUserLocks() {
            try {
                const locks = await LBRStakingContract.methods.getUserLocks(accounts[0]).call();
                
                if (locks.length > 0) {
                    locksContainer.innerHTML = '';
                    
                    locks.forEach((lock, index) => {
                        if (!lock.claimed) {
                            const lockItem = document.createElement('div');
                            lockItem.className = 'lock-item';
                            
                            const unlockDate = new Date(lock.unlockTime * 1000);
                            const now = new Date();
                            const daysLeft = Math.ceil((unlockDate - now) / (1000 * 60 * 60 * 24));
                            
                            lockItem.innerHTML = `
                                <div class="lock-header">
                                    <div class="lock-amount">${formatBalance(web3.utils.fromWei(lock.amount, 'ether'))} LBR</div>
                                    <div class="lock-status">${daysLeft > 0 ? `${daysLeft}d left` : 'Ready to unlock'}</div>
                                </div>
                                <div class="lock-details">
                                    <div>APY: ${(lock.apy / 100).toFixed(0)}%</div>
                                    <div>Unlock: ${unlockDate.toLocaleDateString()}</div>
                                </div>
                                <button class="btn btn-secondary unlock-btn" data-lock-id="${index}">
                                    <i class="fas fa-unlock"></i> Unlock
                                </button>
                            `;
                            
                            locksContainer.appendChild(lockItem);
                        }
                    });
                    
                    // Add event listeners to unlock buttons
                    document.querySelectorAll('.unlock-btn').forEach(btn => {
                        btn.addEventListener('click', async () => {
                            const lockId = btn.getAttribute('data-lock-id');
                            await unlockReward(lockId);
                        });
                    });
                } else {
                    locksContainer.innerHTML = '<p style="text-align: center; color: var(--secondary);">No active locks found</p>';
                }
            } catch (error) {
                console.error('Error loading user locks:', error);
            }
        }

        // Deposit native ETH to get lbrETH
        depositBtn.addEventListener('click', async () => {
            try {
                if (!accounts.length) {
                    showToast('Error', 'Please connect your wallet first', 3000);
                    return;
                }
                
                const amount = depositAmount.value;
                if (!amount || parseFloat(amount) <= 0) {
                    showToast('Error', 'Please enter a valid amount', 3000);
                    return;
                }
                
                // In a real implementation, you would call a deposit function here
                // For this example, we'll just show a success message
                showToast('Success', `Deposited ${amount} ETH for lbrETH`, 3000);
                depositAmount.value = '';
                
                // Refresh balances
                await updateWalletInfo();
            } catch (error) {
                console.error('Error depositing:', error);
                showToast('Error', 'Failed to deposit', 3000);
            }
        });

        // Withdraw lbrETH to get native ETH
        withdrawBtn.addEventListener('click', async () => {
            try {
                if (!accounts.length) {
                    showToast('Error', 'Please connect your wallet first', 3000);
                    return;
                }
                
                const amount = withdrawAmount.value;
                if (!amount || parseFloat(amount) <= 0) {
                    showToast('Error', 'Please enter a valid amount', 3000);
                    return;
                }
                
                // In a real implementation, you would call a withdraw function here
                // For this example, we'll just show a success message
                showToast('Success', `Withdrew ${amount} lbrETH for ETH`, 3000);
                withdrawAmount.value = '';
                
                // Refresh balances
                await updateWalletInfo();
            } catch (error) {
                console.error('Error withdrawing:', error);
                showToast('Error', 'Failed to withdraw', 3000);
            }
        });

        // Approve lbrETH for staking
        approveStakeBtn.addEventListener('click', async () => {
            try {
                if (!accounts.length) {
                    showToast('Error', 'Please connect your wallet first', 3000);
                    return;
                }
                
                // Approve max amount
                await lbrETHContract.methods.approve(LBRStakingAddress, web3.utils.toWei('999999999', 'ether'))
                    .send({ from: accounts[0] });
                
                showToast('Success', 'Approved lbrETH for staking', 3000);
            } catch (error) {
                console.error('Error approving lbrETH:', error);
                showToast('Error', 'Failed to approve', 3000);
            }
        });

        // Stake lbrETH
        stakeBtn.addEventListener('click', async () => {
            try {
                if (!accounts.length) {
                    showToast('Error', 'Please connect your wallet first', 3000);
                    return;
                }
                
                const amount = stakeAmount.value;
                if (!amount || parseFloat(amount) <= 0) {
                    showToast('Error', 'Please enter a valid amount', 3000);
                    return;
                }
                
                await LBRStakingContract.methods.stake(web3.utils.toWei(amount, 'ether'))
                    .send({ from: accounts[0] });
                
                showToast('Success', `Staked ${amount} lbrETH`, 3000);
                stakeAmount.value = '';
                
                // Refresh data
                await loadDashboardData();
            } catch (error) {
                console.error('Error staking:', error);
                showToast('Error', 'Failed to stake', 3000);
            }
        });

        // Unstake lbrETH
        unstakeBtn.addEventListener('click', async () => {
            try {
                if (!accounts.length) {
                    showToast('Error', 'Please connect your wallet first', 3000);
                    return;
                }
                
                const amount = stakeAmount.value;
                if (!amount || parseFloat(amount) <= 0) {
                    showToast('Error', 'Please enter a valid amount', 3000);
                    return;
                }
                
                await LBRStakingContract.methods.unstake(web3.utils.toWei(amount, 'ether'))
                    .send({ from: accounts[0] });
                
                showToast('Success', `Unstaked ${amount} lbrETH`, 3000);
                stakeAmount.value = '';
                
                // Refresh data
                await loadDashboardData();
            } catch (error) {
                console.error('Error unstaking:', error);
                showToast('Error', 'Failed to unstake', 3000);
            }
        });

        // Claim staking rewards
        claimRewardBtn.addEventListener('click', async () => {
            try {
                if (!accounts.length) {
                    showToast('Error', 'Please connect your wallet first', 3000);
                    return;
                }
                
                await LBRStakingContract.methods.claimReward()
                    .send({ from: accounts[0] });
                
                showToast('Success', 'Claimed staking rewards', 3000);
                
                // Refresh data
                await loadDashboardData();
            } catch (error) {
                console.error('Error claiming rewards:', error);
                showToast('Error', 'Failed to claim rewards', 3000);
            }
        });

        // Approve LBR for burning
        approveBurnBtn.addEventListener('click', async () => {
            try {
                if (!accounts.length) {
                    showToast('Error', 'Please connect your wallet first', 3000);
                    return;
                }
                
                // Approve max amount
                await LBRTokenContract.methods.approve(LBRStakingAddress, web3.utils.toWei('999999999', 'ether'))
                    .send({ from: accounts[0] });
                
                showToast('Success', 'Approved LBR for burning', 3000);
            } catch (error) {
                console.error('Error approving LBR:', error);
                showToast('Error', 'Failed to approve', 3000);
            }
        });

        // Burn LBR for reward
        burnBtn.addEventListener('click', async () => {
            try {
                if (!accounts.length) {
                    showToast('Error', 'Please connect your wallet first', 3000);
                    return;
                }
                
                const amount = burnAmount.value;
                if (!amount || parseFloat(amount) <= 0) {
                    showToast('Error', 'Please enter a valid amount', 3000);
                    return;
                }
                
                await LBRStakingContract.methods.burnForReward(web3.utils.toWei(amount, 'ether'))
                    .send({ from: accounts[0] });
                
                showToast('Success', `Burned ${amount} LBR for reward`, 3000);
                burnAmount.value = '';
                
                // Refresh data
                await loadDashboardData();
            } catch (error) {
                console.error('Error burning:', error);
                showToast('Error', 'Failed to burn', 3000);
            }
        });

        // Approve LBR for locking
        approveLockBtn.addEventListener('click', async () => {
            try {
                if (!accounts.length) {
                    showToast('Error', 'Please connect your wallet first', 3000);
                    return;
                }
                
                // Approve max amount
                await LBRTokenContract.methods.approve(LBRStakingAddress, web3.utils.toWei('999999999', 'ether'))
                    .send({ from: accounts[0] });
                
                showToast('Success', 'Approved LBR for locking', 3000);
            } catch (error) {
                console.error('Error approving LBR:', error);
                showToast('Error', 'Failed to approve', 3000);
            }
        });

        // Lock LBR for reward
        lockBtn.addEventListener('click', async () => {
            try {
                if (!accounts.length) {
                    showToast('Error', 'Please connect your wallet first', 3000);
                    return;
                }
                
                const amount = lockAmount.value;
                if (!amount || parseFloat(amount) <= 0) {
                    showToast('Error', 'Please enter a valid amount', 3000);
                    return;
                }
                
                const duration = lockDuration.value;
                
                await LBRStakingContract.methods.lockReward(web3.utils.toWei(amount, 'ether'), duration)
                    .send({ from: accounts[0] });
                
                showToast('Success', `Locked ${amount} LBR for reward`, 3000);
                lockAmount.value = '';
                
                // Refresh data
                await loadDashboardData();
            } catch (error) {
                console.error('Error locking:', error);
                showToast('Error', 'Failed to lock', 3000);
            }
        });

        // Unlock LBR reward
        async function unlockReward(lockId) {
            try {
                if (!accounts.length) {
                    showToast('Error', 'Please connect your wallet first', 3000);
                    return;
                }
                
                await LBRStakingContract.methods.unlock(lockId)
                    .send({ from: accounts[0] });
                
                showToast('Success', 'Unlocked LBR reward', 3000);
                
                // Refresh data
                await loadDashboardData();
            } catch (error) {
                console.error('Error unlocking:', error);
                showToast('Error', 'Failed to unlock', 3000);
            }
        }

        // Initialize the app
        async function init() {
            // Check if wallet is already connected
            if (window.ethereum && window.ethereum.selectedAddress) {
                try {
                    provider = window.ethereum;
                    web3 = new Web3(provider);
                    accounts = [window.ethereum.selectedAddress];
                    
                    // Check if connected to Rise ETH
                    await checkNetwork();
                    
                    // Initialize contracts
                    await initializeContracts();
                    
                    // Update UI
                    updateWalletInfo();
                } catch (error) {
                    console.error('Error initializing with existing connection:', error);
                }
            }
        }

        // Run initialization
        init();
    </script>
</body>
</html>